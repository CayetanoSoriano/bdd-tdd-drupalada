<!doctype html>  
<html lang="es">

<head>
	<meta charset="utf-8">

	<title>TDD - BDD - Behat</title>

	<meta name="description" content="betabeers TDD-BDD">
	<meta name="author" content="Cayetano Soriano Gallego">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/default.css" id="theme">

	<!-- For syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- If the query includes 'print-pdf', use the PDF print sheet -->
	<script>
	document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
	</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	
	<body>
		
		<div class="reveal">

			<!-- Used to fade in a background when a specific slide state is reached -->
			<div class="state-background"></div>
			
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>TDD - BDD</h1>
					<h3>The evolution</h3>
					<img src="img/hey i'm being followed by monkeys (1).jpg" alt="">
				</section>
				<section>
					<h1>$ whoami <blink>_</blink></h1>
					<ul>
						<li>web developer en crononauta</li>
						<li>twitter: @neoshadybeat</li>
						<li>Drupal newbie</li>
						<li>Symfony2 lover</li>
						<li>Android lover</li>
						<li>Movidas dipatcher</li>
						<li>http://about.me/cayetano.soriano</li>
					</ul>
				</section>
				<section>
				<p>Como desarolladores, para verificar el buen comportamiento de nuestro programa, necesitamos <b style="color:green">testearlos</b></p>
				<p class="fragment">preferiblemente automatizados</p>
				<p class="fragment">ó en su defecto</p>
				<p class="fragment"><img src="img/mono.jpg"></p>
				<p></p>
				</section>
				<section>
					<section>
						<h2>¿Qué es TDD?</h2>
						<p class="fragment">
							Desarrollo guiado por pruebas (test-driven development).
						</p>
						<p class="fragment">
							Es un metodología de desarrollo ágil.
						</p>
						<p>
							<div><img src="img/TestDrivenGameDevelopment.png" alt="" class="fragment"></div>

						</p>
					</section>
					<section>
						<div><img src="img/tdddiagram.png" alt="" class=""></div>
					</section>
					<section>
						<h2>¿Qué conseguimos con esto?</h2>
						<ul>
							<li class="fragment">Keep It Simple, Stupid (KISS) </li>
							<li class="fragment">Don't repeat yourself (DRY)</li>
							<li class="fragment">Evitar dolores de cabeza por bugs</li>
							<li class="fragment">Maximizar la productividad</li>
							<li class="fragment">Maximizar la calidad de nuestro código</li>
								<li class="fragment">Los programadores que utilizan el desarrollo guiado por pruebas en un proyecto <strong>virgen</strong> encuentran que en raras ocasiones tienen la necesidad de utilizar el depurador o debuger.
							</li>
							<li class="fragment">Puede proporcionar un gran valor añadido en la creación de software, produciendo aplicaciones de más calidad y en menos tiempo.</li>
							<li class="fragment">Al comenzar por un test, estamos adelantado trabajo y tomando decisiones sobre el resultado.</li>
						</ul>
					</section>

				<section>
						<h2>Inconvenientes:</h2>
						<ul>
							<li>Aprendizaje de aplicación de la metodología.</li>
							<li>No es fácil de debugear</li>
							<li>puede no ser bastante explicativo</li>
						</ul>
					</section>
					<section>
						<p>
							<div class=""><img src="img/original.jpg" alt=""></div>
						</p>
					</section>
					<section>
						<h2>¿cómo podeis hacer TDD?</h2>
						<p>Con cualquier xunit</p>
					</section>
						<section>
<h2>Escribimos el test:</h2>
<pre><code>
public void testSuma() {
	assertEquals(5, Matematicas.suma(2,3));
}</code></pre></section>
						<section>

<h2>Desarrollamos el código suficiente para que se pueda realizar el test:</h2>
<pre><code>
public class Matematicas {
   public static int suma (int a, int b) {
      return 0; 
   }
}
</code></pre></section>
						<section>

<h2>Hacemos que lo pase el código suficiente para que pase el test:</h2>
<pre><code>
public class Matematicas {
   public static int suma (int a, int b) {
      return a+b; 
   }
}
</code></pre>
</section>
					<section>
						<h2>¿Qué es BDD?</h2>
						<p>
							<div>
								<p class="fragment">
									Si buscas en google ...
								</p>
							</div>
							<div class="fragment"><img src="img/bdd.jpg" alt=""></div>
							<ul>
								<li class="fragment">Obviamente no es esto (Body dysmorphic disorder)</li>
							</ul>
						</p>
					</section>
					<section>
						<ul>
							<li class="fragment">Behavior-driven development</li>
							<li class="fragment">Es un proceso de desarrollo del software basado en el test-driven development (TDD)</li>
						</ul>
						<div class="fragment"><img src="img/bdd.png" alt=""></div>

					</section>
					<section>
						<h2>Es una evolución del TDD</h2>
						<div class="fragment"><img src="img/evolution.jpg" alt=""></div>
					</section>
					<section>
						<h2>Mismo vocabulario</h2>
						<ul>
							<li class="fragment">Para Testers</li>
							<li class="fragment">Para Analistas</li>
							<li class="fragment">Para Developers</li>
							<li class="fragment">Para el cliente</li>
						</ul>
						<p><img src="img/comunication.jpg"></p>
					</section>
					<section>
						<h2>Misma metodología</h2>
						<ul>
							<div><img src="img/tdddiagram.png" alt="" class=""></div>
						</ul>
					</section>
					<section>
						<h2>¿Dónde está el cambio?</h2>
						<ul>
							<li class="fragment">Uso de historias de comportamiento (story's behaviour)</li>
							<li class="fragment">No se basa en test, sino es especificaciones</li>
							<li class="fragment">En vez de caso de test (test case) uso de contextos (context)</li>
							<li class="fragment">En vez de assert, expect</li>
						</ul>
					</section>
					<section>
						<h2>¿Qué es una historia?</h2>
						<p>
							<ul>
								<li class="fragment">Given something</li>
								<li class="fragment">when a event occurs</li>
								<li class="fragment">then that will happen</li>
							</ul>
						</p>

					</section>	
					<section>
						<h2>¿Cómo contamos estas historias?</h2>
						<p class="">
							Gherkin
							<img src="" alt="">
							<pre><code>
								Feature: Some terse yet descriptive text of what is desired
								   In order to realize a named business value
								   As an explicit system actor
								   I want to gain some beneficial outcome which furthers the goal
								 
								   Scenario: Some determinable business situation
								     Given some precondition
								       And some other precondition
								      When some action by the actor
								       And some other action
								       And yet another action
								      Then some testable outcome is achieved
								       And something else we can check happens too
								 
								   Scenario: A different situation
								       ...
							</code></pre>
						</p>
					</section>
				</section>
				<section>
					<h2>¿Cómo hacer BDD?</h2>
					<p>
						<ul>
							<li>Mocha para javascript</li>
							<li>Behat para php</li>
							<li>Cucumber para ruby</li>
							<li>freshen para python</li>
							<li>java JBehave</li>
							<li>...</li>
						</ul>
					</p>
				</section>
				<section>
					<section>
						<h2>Ejemplo con behat</h2>
					</section>
					<section>
<h2>Creamos la feature</h2>
<pre><code>
#api_login.feature
Feature: Con privilegios de usar la api
  Comprueba que el usuario tiene privilegios para acceder a la API

  Scenario: Sin acceso a la API, API key no válida
    Given Una API key "12345"
    When Pido un recurso de la API protegido
    Then Debe devolver status 401
</code></pre>
					</section>
<section>
<pre><code>
    /**
     * @Given /^Una API key "([^"]*)"$/
     */
    public function unaApiKey($apikey)
    {
	    throw new PendingException();
    }

    /**
     * @When /^Pido un recurso de la API protegido$/
     */
    public function pidoUnRecursoDeLaApiProtegido()
    {
	    throw new PendingException();
    }

    /**
     * @Then /^Debe devolver status (\d+)$/
     */
    public function debeDevolverStatus($httpStatusCode)
    {
        throw new PendingException();
    }

</code></pre>
</section>
<section>
<pre><code>
    /**
     * @Given /^Una API key "([^"]*)"$/
     */
    public function unaApiKey($apikey)
    {
        $this->apikey=$apikey;
    }

    /**
     * @When /^Pido un recurso de la API protegido$/
     */
    public function pidoUnRecursoDeLaApiProtegido()
    {
        $url = $this->parameters['base_url'].$this->get('router')->generate('api_user_validate')."?apikey=".$this->apikey;
        $browser = $this->get('buzz');
        $response = $browser->get($url);
        $this->httpStatusCode = $response->getStatusCode();
        
    }

    /**
     * @Then /^Debe devolver status (\d+)$/
     */
    public function debeDevolverStatus($httpStatusCode)
    {
        assertEquals($this->httpStatusCode,$httpStatusCode);
    }

</code></pre>
</section>
				</section>
				<section>
					<h2>¿Cómo practico TDD/BDD, lecturas recomendadas?</h2>
					<p>
						<ul>
							<li>Dirigido por test de Carlos Ble <a href="http://www.dirigidoportests.com/el-libro">libro</a></li>
							<li>Katas de código (katayunos y merendojos)</li>
							<li><a href="http://www.solveet.com/">solveet</a></li>
						</ul>
					</p>
				</section>
				<section>
					<h1>That's all folks</h1>
					<img src="img/end.gif" />
				</section>
				<section>
					<h1>¿Preguntas?</h1>	
				</section>
			</div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Presentation progress bar -->
			<div class="progress"><span></span></div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				
				theme: Reveal.getQueryHash().theme || 'default', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/linear(2d)

				// Optional libraries used to extend on reveal.js
				dependencies: [
				{ src: 'lib/js/highlight.js', async: true, callback: function() { window.hljs.initHighlightingOnLoad(); } },
				{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'lib/js/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'lib/js/data-markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: '/socket.io/socket.io.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
				{ src: 'plugin/speakernotes/client.js', async: true, condition: function() { return window.location.host === 'localhost:1947'; } },
				]
			});

</script>

</body>
</html>
